{% extends 'base.html' %}

{% block title %}Dashboard - MonthlySpecs{% endblock %}

{% block content %}
<div class="card">
    <h2 style="margin-bottom: 1.5rem; color: #2c3e50;">Dashboard</h2>
    
    <div style="background: #ecf0f1; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem;">
        <h3 style="margin-bottom: 1rem;">User Information</h3>
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>First Name:</strong> {{ user.first_name|default:"Not set" }}</p>
        <p><strong>Last Name:</strong> {{ user.last_name|default:"Not set" }}</p>
    </div>
    
    {% if customer %}
        <div style="background: #d5f4e6; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem;">
            <h3 style="margin-bottom: 1rem; color: #27ae60;">Customer Profile</h3>
            <p><strong>Phone:</strong> {{ customer.phone|default:"Not set" }}</p>
            <p><strong>Address:</strong> {{ customer.address|default:"Not set" }}</p>
            <p><strong>Date of Birth:</strong> {{ customer.date_of_birth|default:"Not set" }}</p>
            {% if customer.bio %}
                <p><strong>Bio:</strong> {{ customer.bio }}</p>
            {% endif %}
            <p><strong>Member since:</strong> {{ customer.created_at|date:"F d, Y" }}</p>
            
            <h4 style="margin-top: 1.5rem; margin-bottom: 0.5rem;">Companies</h4>
            {% if customer.companies.all %}
                <ul>
                    {% for company in customer.companies.all %}
                        <li>{{ company.name }} - {{ company.email }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p style="color: #7f8c8d;">No companies associated yet.</p>
            {% endif %}
        </div>
    {% else %}
        <div style="background: #fff3cd; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem; border: 1px solid #ffeaa7;">
            <h3 style="margin-bottom: 1rem; color: #856404;">No Customer Profile</h3>
            <p>You don't have a customer profile yet. Customer profiles are created automatically when you sign up, but yours may not have been created.</p>
            <p style="margin-top: 1rem;">Please contact an administrator or use the API to create a customer profile.</p>
        </div>
    {% endif %}
    
    <div style="margin-top: 2rem;">
        <h3 style="margin-bottom: 1rem;">Quick Links</h3>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="/api/docs/" class="btn">API Documentation</a>
            <a href="/admin/" class="btn btn-secondary">Admin Panel</a>
        </div>
    </div>
</div>

<div class="card">
    <h3 style="margin-bottom: 1rem; color: #2c3e50;">Available API Endpoints</h3>
    <ul style="list-style: none; padding: 0; font-family: monospace; font-size: 0.9rem;">
        <li style="padding: 0.5rem; background: #f8f9fa; margin-bottom: 0.25rem; border-radius: 3px;">
            <strong>POST</strong> /api/auth/login/ - Get authentication token
        </li>
        <li style="padding: 0.5rem; background: #f8f9fa; margin-bottom: 0.25rem; border-radius: 3px;">
            <strong>GET</strong> /api/companies/ - List all companies
        </li>
        <li style="padding: 0.5rem; background: #f8f9fa; margin-bottom: 0.25rem; border-radius: 3px;">
            <strong>GET</strong> /api/customers/ - List all customers
        </li>
        <li style="padding: 0.5rem; background: #f8f9fa; margin-bottom: 0.25rem; border-radius: 3px;">
            <strong>GET</strong> /api/items/ - List all items
        </li>
        <li style="padding: 0.5rem; background: #f8f9fa; margin-bottom: 0.25rem; border-radius: 3px;">
            <strong>GET</strong> /api/users/ - List all users
        </li>
    </ul>
    <p style="margin-top: 1rem; color: #7f8c8d;">
        Visit the <a href="/api/docs/" style="color: #3498db;">API Documentation</a> for complete details and interactive testing.
    </p>
</div>
{% endblock %}
