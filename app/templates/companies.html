{% extends 'base.html' %}

{% block title %}νμ‚¬ κ΄€λ¦¬ - MonthlySpecs{% endblock %}

{% block content %}
<div class="card">
    <h2 style="margin-bottom: 1.5rem; color: #2c3e50;">νμ‚¬ κ΄€λ¦¬</h2>
    
    <div style="background: #ecf0f1; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
        <p style="margin: 0; color: #7f8c8d;">
            <strong>μ†μ† νμ‚¬:</strong> {{ companies.count }}κ°
            {% if customer.role %}
                | <strong>κ¶ν•:</strong> {{ customer.role.get_name_display }}
            {% endif %}
        </p>
    </div>

    {% if companies %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1.5rem;">
            {% for company in companies %}
                <div style="background: white; border: 2px solid #ecf0f1; border-radius: 8px; padding: 1.5rem; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.05);" onmouseover="this.style.borderColor='#3498db'; this.style.boxShadow='0 4px 8px rgba(52,152,219,0.2)';" onmouseout="this.style.borderColor='#ecf0f1'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)';">
                    <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                            <span style="font-size: 1.5rem;">πΆ</span>
                        </div>
                        <div style="flex: 1;">
                            <h3 style="margin: 0; color: #2c3e50; font-size: 1.2rem;">{{ company.name }}</h3>
                            <p style="margin: 0.25rem 0 0 0; color: #95a5a6; font-size: 0.85rem;">
                                κ³ κ° {{ company.customers.count }}λ…
                            </p>
                        </div>
                    </div>
                    
                    {% if company.description %}
                        <p style="color: #7f8c8d; font-size: 0.9rem; margin: 0 0 1rem 0; line-height: 1.5;">
                            {{ company.description|truncatewords:20 }}
                        </p>
                    {% endif %}
                    
                    <div style="border-top: 1px solid #ecf0f1; padding-top: 1rem; margin-top: 1rem;">
                        {% if company.email %}
                            <p style="margin: 0.5rem 0; color: #7f8c8d; font-size: 0.85rem;">
                                π“§ {{ company.email }}
                            </p>
                        {% endif %}
                        {% if company.phone %}
                            <p style="margin: 0.5rem 0; color: #7f8c8d; font-size: 0.85rem;">
                                π“ {{ company.phone }}
                            </p>
                        {% endif %}
                        {% if company.address %}
                            <p style="margin: 0.5rem 0; color: #7f8c8d; font-size: 0.85rem;">
                                π“ {{ company.address|truncatewords:10 }}
                            </p>
                        {% endif %}
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <a href="{% url 'company_detail' company.id %}" class="btn" style="width: 100%; text-align: center; display: block; padding: 0.75rem;">
                            μƒμ„Έλ³΄κΈ°
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 3rem; background: #ecf0f1; border-radius: 4px;">
            <span style="font-size: 3rem; display: block; margin-bottom: 1rem;">πΆ</span>
            <p style="color: #7f8c8d; font-size: 1.1rem; margin: 0;">μ†μ†λ νμ‚¬κ°€ μ—†μµλ‹λ‹¤.</p>
        </div>
    {% endif %}
</div>

{% if customer.role and customer.role.name in 'owner,manager' %}
<div class="card">
    <h3 style="margin-bottom: 1rem; color: #2c3e50;">π’΅ μ•λ‚΄</h3>
    <ul style="color: #7f8c8d; line-height: 1.8;">
        <li>κ° νμ‚¬ μΉ΄λ“λ¥Ό ν΄λ¦­ν•λ©΄ μƒμ„Έ μ •λ³΄λ¥Ό ν™•μΈν•κ³  μμ •ν•  μ μμµλ‹λ‹¤.</li>
        <li>μ¤λ„(Owner)μ™€ λ§¤λ‹μ €(Manager)λ” νμ‚¬ μ •λ³΄λ¥Ό μμ •ν•  μ μμµλ‹λ‹¤.</li>
        <li>νμ‚¬ μ •λ³΄λ” μ†μ†λ λ¨λ“  κ³ κ°μ—κ² ν‘μ‹λ©λ‹λ‹¤.</li>
    </ul>
</div>
{% endif %}
{% endblock %}
