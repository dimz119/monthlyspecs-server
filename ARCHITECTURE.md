# Authentication Flow Diagram

## Visual Overview of MonthlySpecs Server Authentication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MonthlySpecs Server Architecture                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Browser User   â”‚              â”‚   API Client (curl,  â”‚
â”‚                      â”‚              â”‚   Postman, Mobile)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                     â”‚
           â”‚                                     â”‚
           â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WEB AUTHENTICATION â”‚              â”‚ API TOKEN AUTH      â”‚
â”‚  (django-allauth)   â”‚              â”‚ (DRF Token)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                     â”‚
           â”‚                                     â”‚
           â–¼                                     â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SIGNUP/LOGIN FLOWS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  WEB SIGNUP FLOW:                    API LOGIN FLOW:                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚                                                                       â”‚
â”‚  1. User visits /accounts/signup/    1. POST /api/auth/login/        â”‚
â”‚  2. Fills form (username, email,        with username & password     â”‚
â”‚     password)                                                         â”‚
â”‚  3. Submits form                     2. Server validates credentials â”‚
â”‚                                                                       â”‚
â”‚  4. django-allauth creates User      3. Returns token:               â”‚
â”‚                                         {                             â”‚
â”‚  5. Django Signal Fires! ğŸ””             "token": "abc123...",        â”‚
â”‚     post_save(User)                     "auth_header": "Token ..."   â”‚
â”‚                                         }                             â”‚
â”‚  6. Signal Handler in                                                â”‚
â”‚     api/signals.py:                  4. Client stores token          â”‚
â”‚     - Creates Customer profile                                       â”‚
â”‚     - Links to User (OneToOne)       5. Client includes token in     â”‚
â”‚                                         all API requests:             â”‚
â”‚  7. User logged in (session)            Authorization: Token abc123  â”‚
â”‚                                                                       â”‚
â”‚  8. Redirected to /dashboard/        6. Server validates token       â”‚
â”‚                                                                       â”‚
â”‚  9. Dashboard shows:                 7. Returns requested data        â”‚
â”‚     - User info                                                       â”‚
â”‚     - Customer profile âœ…                                             â”‚
â”‚     - Companies                                                       â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA MODELS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   User (Django Auth)                                                  â”‚
â”‚   â”œâ”€â”€ username                                                        â”‚
â”‚   â”œâ”€â”€ email                                                           â”‚
â”‚   â”œâ”€â”€ password                                                        â”‚
â”‚   â””â”€â”€ Customer (OneToOne) â”€â”€â”                                        â”‚
â”‚                               â”‚                                       â”‚
â”‚   Customer                    â”‚                                       â”‚
â”‚   â”œâ”€â”€ user â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚   â”œâ”€â”€ phone                                                           â”‚
â”‚   â”œâ”€â”€ address                                                         â”‚
â”‚   â”œâ”€â”€ date_of_birth                                                   â”‚
â”‚   â”œâ”€â”€ bio                                                             â”‚
â”‚   â”œâ”€â”€ profile_picture                                                 â”‚
â”‚   â”œâ”€â”€ companies (M2M) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚   â””â”€â”€ items (M2M) â”€â”€â”€â”€â”€â”€â”€â”      â”‚                                    â”‚
â”‚                           â”‚      â”‚                                    â”‚
â”‚   Company                 â”‚      â”‚                                    â”‚
â”‚   â”œâ”€â”€ name                â”‚      â”‚                                    â”‚
â”‚   â”œâ”€â”€ email               â”‚      â”‚                                    â”‚
â”‚   â”œâ”€â”€ phone               â”‚      â”‚                                    â”‚
â”‚   â”œâ”€â”€ address             â”‚      â”‚                                    â”‚
â”‚   â””â”€â”€ customers â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                                    â”‚
â”‚                                   â”‚                                    â”‚
â”‚   Item                            â”‚                                    â”‚
â”‚   â”œâ”€â”€ name                        â”‚                                    â”‚
â”‚   â”œâ”€â”€ description                 â”‚                                    â”‚
â”‚   â””â”€â”€ customers â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      URL ROUTING                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  WEB URLS (Browser):              API URLS (Token):                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                       â”‚
â”‚  /                                /api/                              â”‚
â”‚  â””â”€â”€ home.html                    â”œâ”€â”€ auth/                          â”‚
â”‚                                   â”‚   â”œâ”€â”€ login/                      â”‚
â”‚  /accounts/                       â”‚   â””â”€â”€ logout/                     â”‚
â”‚  â”œâ”€â”€ signup/                      â”‚                                   â”‚
â”‚  â”œâ”€â”€ login/                       â”œâ”€â”€ companies/                      â”‚
â”‚  â”œâ”€â”€ logout/                      â”‚   â”œâ”€â”€ [list]                      â”‚
â”‚  â””â”€â”€ password/reset/              â”‚   â”œâ”€â”€ {id}/                       â”‚
â”‚                                   â”‚   â”œâ”€â”€ {id}/add_customer/          â”‚
â”‚  /dashboard/                      â”‚   â””â”€â”€ {id}/customers/             â”‚
â”‚  â””â”€â”€ dashboard.html               â”‚                                   â”‚
â”‚                                   â”œâ”€â”€ customers/                      â”‚
â”‚  /admin/                          â”‚   â”œâ”€â”€ [list]                      â”‚
â”‚  â””â”€â”€ Django Admin                 â”‚   â”œâ”€â”€ {id}/                       â”‚
â”‚                                   â”‚   â”œâ”€â”€ {id}/add_company/           â”‚
â”‚                                   â”‚   â””â”€â”€ {id}/add_item/              â”‚
â”‚  /api/docs/                       â”‚                                   â”‚
â”‚  â””â”€â”€ Swagger UI                   â”œâ”€â”€ items/                          â”‚
â”‚                                   â”‚   â”œâ”€â”€ [list]                      â”‚
â”‚                                   â”‚   â”œâ”€â”€ {id}/                       â”‚
â”‚                                   â”‚   â””â”€â”€ {id}/add_customer/          â”‚
â”‚                                   â”‚                                   â”‚
â”‚                                   â””â”€â”€ users/                          â”‚
â”‚                                       â””â”€â”€ [list]                      â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SIGNAL HANDLER FLOW                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   User Signs Up                                                       â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   django-allauth creates User                                         â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   User.save() called                                                  â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   post_save signal fires                                              â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   @receiver in api/signals.py triggered                               â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   if created == True:                                                 â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   Customer.objects.create(user=instance)                              â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   Customer profile created! âœ…                                         â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   Redirect to /dashboard/                                             â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AUTHENTICATION COMPARISON                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Feature          â”‚ Web Auth              â”‚ API Token Auth           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Purpose          â”‚ Browser access        â”‚ Programmatic access      â”‚
â”‚  Login URL        â”‚ /accounts/login/      â”‚ /api/auth/login/         â”‚
â”‚  Auth Method      â”‚ Session cookies       â”‚ Token in header          â”‚
â”‚  Storage          â”‚ Browser cookies       â”‚ Client app storage       â”‚
â”‚  Header           â”‚ Cookie: sessionid=... â”‚ Authorization: Token ... â”‚
â”‚  Logout           â”‚ /accounts/logout/     â”‚ /api/auth/logout/        â”‚
â”‚  Persistence      â”‚ Until browser close   â”‚ Token doesn't expire     â”‚
â”‚  Use Case         â”‚ Human users           â”‚ Apps, scripts, mobile    â”‚
â”‚  Example          â”‚ Visit /dashboard/     â”‚ curl with -H header      â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUICK REFERENCE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  SIGN UP:    http://localhost:8000/accounts/signup/                  â”‚
â”‚  LOGIN:      http://localhost:8000/accounts/login/                   â”‚
â”‚  DASHBOARD:  http://localhost:8000/dashboard/                        â”‚
â”‚  SWAGGER:    http://localhost:8000/api/docs/                         â”‚
â”‚  ADMIN:      http://localhost:8000/admin/                            â”‚
â”‚                                                                       â”‚
â”‚  GET TOKEN:  POST /api/auth/login/                                   â”‚
â”‚              {"username": "...", "password": "..."}                   â”‚
â”‚                                                                       â”‚
â”‚  USE TOKEN:  curl -H "Authorization: Token abc123..." /api/...       â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Takeaways

1. **Two Independent Auth Systems**: Web (sessions) and API (tokens)
2. **Auto Customer Creation**: Django signals automatically create Customer on signup
3. **OneToOne Link**: Customer â†” User relationship
4. **Many-to-Many**: Customer â†” Company and Customer â†” Item
5. **Complete REST API**: All CRUD operations with custom actions
6. **Interactive Docs**: Swagger UI for testing
7. **Clean Templates**: Custom HTML for login, signup, dashboard

## Files Created

- `api/signals.py` - Auto-create Customer on User creation
- `api/web_views.py` - Home and dashboard views
- `api/web_urls.py` - URL routing for web pages
- `templates/base.html` - Base template with navigation
- `templates/home.html` - Landing page
- `templates/dashboard.html` - User dashboard
- `templates/account/login.html` - Custom login page
- `templates/account/signup.html` - Custom signup page
- `WEB_AUTH_GUIDE.md` - Complete web auth documentation
- `SETUP_COMPLETE.md` - Full setup summary
- `QUICKSTART.md` - Quick start guide

## Status: âœ… COMPLETE AND RUNNING!
