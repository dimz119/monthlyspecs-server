{% extends 'base.html' %}

{% block title %}Dashboard - MonthlySpecs{% endblock %}

{% block content %}
<div class="card">
    <h2 style="margin-bottom: 1.5rem; color: #2c3e50;">안녕하세요, {{ user.username }}님!</h2>

    <div style="background: #ecf0f1; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem;">
        <h4 style="margin-top: 1.5rem; margin-bottom: 0.5rem;">현재 연결된 지점</h4>
        {% if customer.companies.all %}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                {% for company in customer.companies.all %}
                    <div style="background: white; padding: 1rem; border-radius: 4px; border-left: 4px solid #3498db;">
                        <p style="margin: 0; font-weight: bold;">{{ company.name }}</p>
                        <p style="margin: 0.25rem 0 0 0; color: #7f8c8d; font-size: 0.9rem;">{{ company.email }}</p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="color: #7f8c8d; background: white; padding: 1rem; border-radius: 4px;">No companies associated yet.</p>
        {% endif %}
    </div>
</div>

{% if user.is_staff %}
<div class="card">
    <h3 style="margin-bottom: 1rem; color: #2c3e50;">System Overview</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 8px; color: white;">
            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; opacity: 0.9;">API Status</h4>
            <p style="margin: 0; font-size: 1.5rem; font-weight: bold;">✓ Online</p>
        </div>
        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 1.5rem; border-radius: 8px; color: white;">
            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; opacity: 0.9;">Your Role</h4>
            <p style="margin: 0; font-size: 1.5rem; font-weight: bold;">
                {% if customer and customer.role %}{{ customer.role.get_name_display }}{% else %}User{% endif %}
            </p>
        </div>
        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 1.5rem; border-radius: 8px; color: white;">
            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; opacity: 0.9;">Companies</h4>
            <p style="margin: 0; font-size: 1.5rem; font-weight: bold;">
                {% if customer %}{{ customer.companies.count }}{% else %}0{% endif %}
            </p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
